<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Notificaciones - GoToGym</title>
    <link rel="stylesheet" href="../../css/theme.css">
    <link rel="stylesheet" href="../../css/adminDashboard.css?v=2026-02-27-notifs">
</head>

<body data-admin-page="notifications">

    <div class="admin-container">
        <div class="admin-header">
            <div>
                <div class="admin-title-wrap">
                    <div class="admin-menu-wrap">
                        <button id="adminMenuBtn" class="admin-menu-btn" type="button" aria-label="Men√∫ admin">‚ò∞</button>
                        <div id="adminMenuPanel" class="admin-menu-panel">
                            <a class="admin-menu-link" href="./AdminDashboard.html">Dashboard M√©tricas</a>
                            <a class="admin-menu-link" href="./AdminUsers.html">Administraci√≥n de Usuarios</a>
                            <a class="admin-menu-link active" href="./AdminNotifications.html">Panel de Notificaciones</a>
                            <button class="admin-menu-link admin-menu-link-danger" type="button" onclick="logout()">Cerrar Sesi√≥n</button>
                        </div>
                    </div>
                    <h3>Panel de Notificaciones</h3>
                </div>
                <div class="admin-subtitle">Canal operativo para broadcast y permisos push (PWA/m√≥vil).</div>
            </div>
            <div class="admin-header-actions">
                <span id="lastUpdated" class="last-updated">‚Äî</span>
            </div>
        </div>

        <section class="layer-section" id="operativo-notifications">
            <div class="layer-header">
                <div>
                    <div class="layer-title">Notificaciones</div>
                    <div class="layer-subtitle">Env√≠a alertas operativas y valida la salud de canales push.</div>
                </div>
                <span class="layer-chip">Broadcast</span>
            </div>

            <div class="table-section">
                <div class="widget-title">üîî Notificaciones</div>
                <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 15px;">Env√≠a un broadcast real a todos los
                    dispositivos con notificaciones activas (PWA y m√≥vil).</p>

                <button class="btn btn-outline-teal" style="width: 100%; margin-bottom: 10px;"
                    onclick="requestPermission()">Activar Permisos</button>

                <select id="notifVariable" class="input-field" style="margin-bottom: 10px;">
                    <option value="s_sleep">Horas de sue√±o</option>
                    <option value="s_stress_inv">Nivel de Estr√©s</option>
                    <option value="s_energy">Nivel de Energ√≠a</option>
                </select>

                <button class="btn btn-primary" style="width: 100%;" onclick="sendDashboardNotification()">Enviar
                    Alerta</button>

                <div class="privacy-card">
                    <div class="widget-title" style="margin-top: 0;">üîí Privacidad (resumen)</div>
                    <p style="font-size: 12px; color: var(--text-muted); margin-bottom: 10px;">
                        Este panel usa datos agregados cuando es posible y est√° restringido a administradores.
                    </p>
                    <ul>
                        <li>T√©cnicos: IP, sesi√≥n (JWT), tokens push.</li>
                        <li>Canales: Web Push y FCM.</li>
                        <li>Acciones de broadcast quedan auditadas con motivo.</li>
                    </ul>
                    <p style="font-size: 12px; color: var(--text-muted); margin-top: 10px;">
                        Ver pol√≠tica: <a href="../info/PoliticaPrivacidad.html">Pol√≠ticas de Privacidad</a>
                    </p>
                </div>
            </div>
        </section>
    </div>

    <div id="toast" class="toast"></div>

    <script src="../../js/config.js?v=2026-02-27-notifs"></script>
    <script src="../../js/adminDashboard.js?v=2026-02-27-notifs"></script>
</body>

</html>
